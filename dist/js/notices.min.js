(function(d){var b,r,m,h;h=function(a){var c,n,k,e,f,d,t,u,p,l,q,g;q=a.template;g=null!=(f=a.type)?f:"ok";f=null!=(d=a.title)?d:"";d=null!=(c=a.text)?c:"";n=null!=(t=a.buttons)?t:{};c=null!=(u=a.altAction)?u:"";l=a.resolver;p=a.rejecter;a=null!=(k=a.context)?k:h.context;g=g.replace("_","");k=q?q:m.notice.replace("{{title}}",f).replace("{{text}}",d).replace("{{type}}",g).replace("{{altAction}}",c).replace("{{actionsCount}}",function(){switch(g){case "ok":return 1;case "yesno":return 2;default:var a;
a=[];for(e in n)a.push(e);return a.length}}()).replace("{{actions}}",function(){var a;switch(g){case "ok":a={ok:"OK"};l="ok";break;case "yesno":a={no:"No",yes:"Yes"};p="no";l="yes";break;case "custom":a=n}return r(a,l,p)});return new b({markup:k,type:g,context:a})};b=function(a){var c;c=a.markup;this.type=a.type;a=a.context;this.el$=d(c);this.isActive=!0;this.wrapper$=this.appendContainer(a);this.allInstances.push(this);this.el$.data("Notice",this);return this.prompt()};b.prototype.appendContainer=
function(a){return d(".Notices",a).length?d(".Notices",a):d("<div class='Notices'></div>").appendTo(a)};b.prototype.append=function(){var a,c;a=function(a){return function(){return a.el$.appendTo(a.wrapper$)}}(this);c=this.allInstances.indexOf(this);return(this.allInstances.slice(0,c).length?this.allInstances.slice(-2)[0].promise:Promise.resolve()).then(a,a)};b.prototype.remove=function(){this.el$.remove();return this.isActive=!1};b.prototype.reveal=function(){return setTimeout(function(a){return function(){return a.wrapper$.addClass("reveal")}}(this),
50)};b.prototype.dismiss=function(){this.allInstances.splice(this.allInstances.indexOf(this),1);this.allInstances.length||this.wrapper$.removeClass("reveal");return setTimeout(function(a){return function(){return a.remove()}}(this),400)};b.prototype.prompt=function(){return this.promise=new Promise(function(a){return function(c,b){a.append();a.reveal();a.el$.on("click",".Notice-actions-item",function(){return a.dismiss()});a.el$.on("click","._resolver",function(){return c(a)});a.el$.on("click","._rejecter",
function(){return b(a)});return a.el$.on("click",".Notice-altAction",function(){a.dismiss();return b(a)})}}(this))};b.prototype.allInstances=[];r=function(a,b,d){var c,e;return function(){var f;f=[];for(e in a)c=a[e],f.push(m.action.replace("{{name}}",e).replace("{{name}}",e).replace("{{label}}",c).replace("{{promiseAction}}",function(){switch(!1){case e!==b:return"_resolver";case e!==d:return"_rejecter";default:return""}}()));return f}().join("")};m={notice:"<div class='Notice'> <div class='Notice-title'>{{title}}</div> <div class='Notice-message'>{{text}}</div> <div class='Notice-actions Notice-actions--{{type}} _count--{{actionsCount}}'>{{actions}}</div> <div class='Notice-altAction'>{{altAction}}</div> </div>",
action:"<div class='Notice-actions-item button_{{name}} {{promiseAction}}' data-name='{{name}}'> <div class='Notice-actions-item-text'>{{label}}</div> </div>"};h.instances=b.prototype.allInstances;h.context=document.body;b.version="2.2.1";window.notify=h;return h.Notice=b})(jQuery);
