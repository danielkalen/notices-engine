(function(c){var b,q,l,e;e=function(a){var d,m,h,r,f,c,t,u,n,k,p,g;p=a.template;g=null!=(f=a.type)?f:"ok";f=null!=(c=a.title)?c:"";c=null!=(d=a.text)?d:"";m=null!=(t=a.buttons)?t:{};d=null!=(u=a.altAction)?u:"";k=a.resolver;n=a.rejecter;a=null!=(h=a.context)?h:e.context;g=g.replace("_","");h=p?p:l.notice.replace("{{title}}",f).replace("{{text}}",c).replace("{{type}}",g).replace("{{altAction}}",d).replace("{{actionsCount}}",function(){switch(g){case "ok":return 1;case "yesno":return 2;default:var a;
a=[];for(r in m)a.push(r);return a.length}}()).replace("{{actions}}",function(){var a;switch(g){case "ok":a={ok:"OK"};k="ok";break;case "yesno":a={no:"No",yes:"Yes"};n="no";k="yes";break;case "custom":a=m}return q(a,k,n)});return new b({markup:h,type:g,context:a})};b=function(a){var d;d=a.markup;this.type=a.type;a=a.context;this.el$=c(d);this.isActive=!0;this.wrapper$=this.appendContainer(a);this.allInstances.push(this);this.el$.data("Notice",this);return this.prompt()};b.prototype.appendContainer=
function(a){return c(".Notices",a).length?c(".Notices",a):c("<div class='Notices'></div>").appendTo(a)};b.prototype.append=function(){var a,d;a=function(a){return function(){return a.el$.appendTo(a.wrapper$)}}(this);d=this.allInstances.indexOf(this);return(this.allInstances.slice(0,d).length?this.allInstances.slice(-2)[0].promise:Promise.resolve()).then(a,a)};b.prototype.remove=function(){this.el$.remove();return this.isActive=!1};b.prototype.reveal=function(){return setTimeout(function(a){return function(){return a.wrapper$.addClass("reveal")}}(this),
50)};b.prototype.dismiss=function(){this.allInstances.splice(this.allInstances.indexOf(this),1);this.allInstances.length||this.wrapper$.removeClass("reveal");return setTimeout(function(a){return function(){return a.remove()}}(this),400)};b.prototype.prompt=function(){return this.promise=new Promise(function(a){return function(d,b){a.append();a.reveal();a.el$.on(e.clickEvent,".Notice-actions-item",function(){return a.dismiss()});a.el$.on(e.clickEvent,"._resolver",function(){return d(a)});a.el$.on(e.clickEvent,
"._rejecter",function(){return b(a)});return a.el$.on(e.clickEvent,".Notice-altAction",function(){a.dismiss();return b(a)})}}(this))};b.prototype.allInstances=[];q=function(a,b,e){var d,c;return function(){var f;f=[];for(c in a)d=a[c],f.push(l.action.replace("{{name}}",c).replace("{{name}}",c).replace("{{label}}",d).replace("{{promiseAction}}",function(){switch(!1){case c!==b:return"_resolver";case c!==e:return"_rejecter";default:return""}}()));return f}().join("")};l={notice:"<div class='Notice'> <div class='Notice-title'>{{title}}</div> <div class='Notice-message'>{{text}}</div> <div class='Notice-actions Notice-actions--{{type}} _count--{{actionsCount}}'>{{actions}}</div> <div class='Notice-altAction'>{{altAction}}</div> </div>",
action:"<div class='Notice-actions-item button_{{name}} {{promiseAction}}' data-name='{{name}}'> <div class='Notice-actions-item-text'>{{label}}</div> </div>"};e.instances=b.prototype.allInstances;e.context=document.body;e.clickEvent="click";b.version="2.3.0";window.notify=e;return e.Notice=b})(jQuery);
