(function(d){var b,r,m,k;k=function(a){var c,n,g,e,f,d,t,u,p,l,q,h;q=a.template;h=null!=(f=a.type)?f:"ok";f=null!=(d=a.title)?d:"";d=null!=(c=a.text)?c:"";n=null!=(t=a.buttons)?t:{};c=null!=(u=a.altAction)?u:"";l=a.resolver;p=a.rejecter;a=null!=(g=a.context)?g:k.context;h=h.replace("_","");g=q?q:m.notice.replace("{{title}}",f).replace("{{text}}",d).replace("{{type}}",h).replace("{{altAction}}",c).replace("{{actionsCount}}",function(){switch(h){case "ok":return 1;case "yesno":return 2;default:var a;
a=[];for(e in n)a.push(e);return a.length}}()).replace("{{actions}}",function(){var a;switch(h){case "ok":a={ok:"OK"};l="ok";break;case "yesno":a={no:"No",yes:"Yes"};p="no";l="yes";break;case "custom":a=n}return r(a,l,p)});return new b({markup:g,type:h,context:a})};b=function(a){var c;c=a.markup;this.type=a.type;a=a.context;this.el$=d(c);this.isActive=!0;this.wrapper$=this.appendContainer(a);this.allInstances.push(this);this.el$.data("Notice",this);return this.prompt()};b.prototype.appendContainer=
function(a){return d(".notices",a).length?d(".notices",a):d("<div class='notices'></div>").appendTo(a)};b.prototype.append=function(){var a,c;a=function(a){return function(){return a.el$.appendTo(a.wrapper$)}}(this);c=this.allInstances.indexOf(this);return(this.allInstances.slice(0,c).length?this.allInstances.slice(-2)[0].promise:Promise.resolve()).then(a,a)};b.prototype.remove=function(){this.el$.remove();return this.isActive=!1};b.prototype.reveal=function(){return setTimeout(function(a){return function(){return a.wrapper$.addClass("reveal")}}(this))};
b.prototype.dismiss=function(){this.allInstances.splice(this.allInstances.indexOf(this),1);this.allInstances.length||this.wrapper$.removeClass("reveal");return setTimeout(function(a){return function(){return a.remove()}}(this),400)};b.prototype.prompt=function(){return this.promise=new Promise(function(a){return function(c,b){a.append();a.reveal();a.el$.on("click",".notice-actions-item",function(){return a.dismiss()});a.el$.on("click","._resolver",function(){return c(a)});a.el$.on("click","._rejecter",
function(){return b(a)});return a.el$.on("click",".notice-altAction",function(){a.dismiss();return b(a)})}}(this))};b.prototype.allInstances=[];r=function(a,b,d){var g,e;return function(){var f;f=[];for(e in a)g=a[e],f.push(m.action.replace("{{name}}",e).replace("{{name}}",e).replace("{{label}}",g).replace("{{promiseAction}}",function(){switch(!1){case e!==b:return"_resolver";case e!==d:return"_rejecter";default:return""}}()));return f}().join("")};m={notice:"<div class='notice'> <div class='notice-title'>{{title}}</div> <div class='notice-message'>{{text}}</div> <div class='notice-actions notice-actions--{{type}} _count--{{actionsCount}}'>{{actions}}</div> <div class='notice-altAction'>{{altAction}}</div> </div>",
action:"<div class='notice-actions-item button_{{name}} {{promiseAction}}' data-name='{{name}}'> <div class='notice-actions-item-text'>{{label}}</div> </div>"};k.instances=b.prototype.allInstances;k.context=document.body;window.notify=k;return k.Notice=b})(jQuery);
