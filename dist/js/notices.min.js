(function(d){var b;0===d(".notices").length&&d("body").prepend('<div class="notices"></div>');this.notify=function(a){var e,c,f,d,h,k,l;k=a.template;l=null!=(c=a.type)?c:"ok";c=null!=(f=a.title)?f:"";f=null!=(e=a.text)?e:"";e=null!=(d=a.buttonText)?d:"";a=null!=(h=a.altAction)?h:"";return new b({template:k,type:l,title:c,text:f,buttonText:e,altAction:a})};b=function(a){var e,c,b,g;c=a.template;this.type=a.type;g=a.title;b=a.text;a=a.altAction;"yes_no"===this.type&&(this.type="yesno");this.isActive=
!0;this.parentWrapper=d(".notices").last();e="yesno"===this.type?" notice-actions_yesno":"";this.el=c?d(c):d("<div class='notice'> <div class='notice-title'>"+g+"</div> <div class='notice-message'>"+b+"</div> <div class='notice-actions"+e+"'>"+notify.noticeActionTemplates[type]+"</div> <div class='notice-altAction'>"+a+"</div> </div>");this.el.data("Notice",this);this.append();return this.prompt()};b.prototype.append=function(){return this.el.appendTo(this.parentWrapper)};b.prototype.remove=function(){this.el.remove();
return this.isActive=!1};b.prototype.reveal=function(){return setTimeout(function(a){return function(){return a.parentWrapper.addClass("reveal")}}(this),0)};b.prototype.dismiss=function(){this.parentWrapper.removeClass("reveal");return setTimeout(function(a){return function(){return a.remove()}}(this),400)};b.prototype.prompt=function(){return new Promise(function(a){return function(b,c){a.reveal();a.el.on("click",".notice-altAction",function(){a.dismiss();return c(a)});if("ok"===a.type)return a.el.on("click",
".button_ok",function(){a.dismiss();return b(a)});if("yesno"===a.type)return a.el.on("click",".button_yes",function(){a.dismiss();return b(a)}),a.el.on("click",".button_no",function(){a.dismiss();return c(a)})}}(this))};return this.notify.noticeActionTemplates={ok:"<div class='notice-actions-item button_ok'> <div class='notice-actions-item-text'>Ok</div> </div>",yesno:"<div class='notice-actions-item button_no'> <div class='notice-actions-item-text'>No</div> </div> <div class='notice-actions-item button_yes'> <div class='notice-actions-item-text'>Yes</div> </div>"}})(jQuery);
